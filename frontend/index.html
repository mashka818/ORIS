<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Онлайн‑запись</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  </head>
  <body>
    <header class="app-header">
      <div class="container header-inner">
        <div class="brand">Виджет онлайн‑записи</div>
        <div class="header-actions">
          <div class="custom-select" id="customLangSelect">
            <div class="select-selected">RU</div>
            <div class="select-items select-hide">
              <div data-value="ru">RU</div>
              <div data-value="en">EN</div>
            </div>
          </div>
          <label class="theme-switch" aria-label="Переключить тему">
            <input type="checkbox" id="themeToggle">
            <div class="toggle">
              <div class="cloud"></div>
              <div class="star"></div>
              <div class="sea"></div>
              <div class="mountains"></div>
            </div>
          </label>
          <button id="adminBtn" class="admin-btn">Войти</button>
          <button id="logoutBtn" class="admin-btn" style="display:none">Выйти</button>
        </div>
      </div>
    </header>

    <!-- Welcome Section -->
    <section id="welcomeSection" class="welcome-section">
      <div class="container welcome-content">
        <h1 class="welcome-title" data-i18n="welcomeTitle">Добро пожаловать!</h1>
        <p class="welcome-text" data-i18n="welcomeText">Воспользуйтесь нашим сервисом онлайн-записи. Выберите удобную дату и время для посещения.</p>
        <button class="primary large" id="startBooking" data-i18n="startBooking">Начать запись</button>
      </div>
    </section>

    <!-- Booking Section -->
    <main class="container layout" id="bookingSection" style="display:none">
      <section class="calendar-card" id="calendarCard">
        <div class="calendar-header">
          <button class="nav-btn" id="prevMonth" aria-label="Предыдущий месяц">‹</button>
          <div class="month-label" id="monthLabel"></div>
          <button class="nav-btn" id="nextMonth" aria-label="Следующий месяц">›</button>
        </div>
        <div class="calendar-grid" id="calendarGrid" aria-label="Календарь"></div>

        <div class="slots">
          <div class="slots-group">
            <div class="slots-title" data-i18n="day">День</div>
            <div class="slot-list" id="daySlots"></div>
          </div>
          <div class="slots-group">
            <div class="slots-title" data-i18n="evening">Вечер</div>
            <div class="slot-list" id="eveningSlots"></div>
          </div>
        </div>
      </section>

      <aside class="form-card" id="formCard">
        <h2 data-i18n="formTitle">Запись на прием</h2>
        <form id="bookingForm">
          <div class="input-row">
            <label for="name" data-i18n="name">Имя</label>
            <input id="name" name="name" type="text" placeholder="Иван Иванов" required />
            <span class="error-msg" id="nameError"></span>
          </div>
          <div class="input-row">
            <label for="phone" data-i18n="phone">Телефон</label>
            <input id="phone" name="phone" type="tel" placeholder="+7 900 000‑00‑00" required />
            <span class="error-msg" id="phoneError"></span>
          </div>
          <div class="selected-slot" id="selectedSlot" data-i18n="noSlot">Выберите дату и время</div>
          <button class="primary" type="submit" disabled id="submitBtn" data-i18n="book">Записаться</button>
          <div class="hint" data-i18n="privacy">Отправляя заявку, вы соглашаетесь с обработкой персональных данных</div>
        </form>
      </aside>
    </main>

    <!-- Toast Notification -->
    <div class="toast" id="toast" role="status" aria-live="polite"></div>

    <!-- Admin Panel -->
    <main class="container admin-layout" id="adminSection" style="display:none">
      <section class="calendar-card">
        <h2>Административная панель</h2>
        <div class="toolbar">
          <div style="display:flex; gap:8px; align-items:center">
            <div class="custom-date-picker" id="customDatePicker">
              <div class="date-selected" id="dateSelected">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                  <line x1="16" y1="2" x2="16" y2="6"/>
                  <line x1="8" y1="2" x2="8" y2="6"/>
                  <line x1="3" y1="10" x2="21" y2="10"/>
                </svg>
                <span id="dateText">Выбрать дату</span>
              </div>
              <div class="date-dropdown select-hide" id="dateDropdown">
                <div class="mini-calendar">
                  <div class="mini-calendar-header">
                    <button class="mini-nav-btn" id="miniPrevMonth">‹</button>
                    <div class="mini-month-label" id="miniMonthLabel"></div>
                    <button class="mini-nav-btn" id="miniNextMonth">›</button>
                  </div>
                  <div class="mini-calendar-grid" id="miniCalendarGrid"></div>
                </div>
                <input type="hidden" id="dateFilter" />
              </div>
            </div>
            <button class="ghost" id="clearFilter">Сбросить</button>
          </div>
        </div>
        <div id="bookingsList"></div>
      </section>
    </main>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 data-i18n="adminLogin">Вход в админ-панель</h2>
          <button class="modal-close" id="closeModal">&times;</button>
        </div>
        <form id="loginForm">
          <div class="input-row">
            <label for="username" data-i18n="username">Логин</label>
            <input id="username" name="username" type="text" placeholder="admin" required />
          </div>
          <div class="input-row">
            <label for="password" data-i18n="password">Пароль</label>
            <input id="password" name="password" type="password" placeholder="••••••••" required />
          </div>
          <div class="error-msg" id="loginError"></div>
          <button class="primary" type="submit" data-i18n="login">Войти</button>
        </form>
      </div>
    </div>

    <script src="app.js"></script>
  </body>
</html>
